# 0.1.0 Navigation Foundation Specification

## Version Overview

**Version:** 0.1.0 — Navigation Foundation
**Goal:** Establish core navigation structure with bottom tab bar and placeholder pages
**Dependencies:** Builds on 0.0.0 scaffolding specification

This version establishes the foundational navigation structure for Dibble, replacing the top navbar with a bottom tab bar navigation system. This creates the primary navigation pattern that will be used throughout the app's lifecycle.

### Relationship to Roadmap

This version addresses the first milestone in the roadmap:
- **Roadmap Goal:** Establish core navigation structure with bottom tab bar and placeholder pages
- **Foundation for:** All future versions (0.2.0+ will build on this navigation structure)
- **User Experience:** Provides the primary navigation interface users will interact with

## Technical Requirements

### Core Requirements

1. **Bottom Tab Bar Navigation**
   - Three tabs: Map View (center), Account (right), Social Feed (left)
   - Fixed position at bottom of viewport
   - Visual indicators for active tab state
   - Smooth transitions between tabs

2. **Placeholder Pages**
   - Map View page component (center tab)
   - Account page component (right tab)
   - Social Feed page component (left tab)
   - Each page should have distinct placeholder content

3. **Routing System**
   - Update Route enum to support three main tabs
   - Maintain Dioxus Router integration
   - URL-based routing for each tab
   - Deep linking support for each tab

4. **State Management**
   - Track active tab state
   - Synchronize tab state with URL routing
   - Visual feedback for active tab

## Implementation Details

### File Structure Changes

```
src/
├── main.rs                    # Updated Route enum, remove old routes
├── components/
│   ├── mod.rs
│   ├── bottom_tab_bar.rs      # NEW: Bottom tab bar component
│   ├── hero.rs                # Keep for now (may remove later)
│   └── echo.rs                # Keep for now (may remove later)
└── views/
    ├── mod.rs                 # Updated exports
    ├── navbar.rs              # REPLACE: Remove top navbar
    ├── bottom_tab_layout.rs    # NEW: Layout component with bottom tab bar
    ├── map_view.rs            # NEW: Map View placeholder page
    ├── account_view.rs        # NEW: Account placeholder page
    └── social_feed_view.rs    # NEW: Social Feed placeholder page
```

### Routing Changes

**Current Route Structure (to be replaced):**
```rust
enum Route {
    #[layout(Navbar)]
        #[route("/")]
        Home {},
        #[route("/blog/:id")]
        Blog { id: i32 },
}
```

**New Route Structure:**
```rust
enum Route {
    #[layout(BottomTabLayout)]
        #[route("/")]
        MapView {},
        #[route("/account")]
        AccountView {},
        #[route("/social")]
        SocialFeedView {},
}
```

### Component Architecture

#### 1. BottomTabBar Component

**Location:** `src/components/bottom_tab_bar.rs`

**Purpose:** Reusable bottom tab bar component with three tabs

**Props:**
- `active_tab: Signal<MainTab>` - Current active tab state
- `on_tab_change: EventHandler<MainTab>` - Callback when tab is clicked

**Features:**
- Three tab buttons: Social Feed (left), Map View (center), Account (right)
- Active tab visual indicator (highlighted background, different color)
- Icons or text labels for each tab
- Accessible navigation (keyboard support, ARIA labels)

**State Management:**
- Uses `active_tab` signal to determine which tab is active
- Calls `on_tab_change` when user clicks a tab

#### 2. BottomTabLayout Component

**Location:** `src/views/bottom_tab_layout.rs`

**Purpose:** Layout wrapper that includes bottom tab bar and renders child routes

**Structure:**
- Container div with flex layout
- Main content area (takes up most of viewport)
- Bottom tab bar (fixed at bottom)
- Uses `Outlet<Route>` to render child routes

**Styling:**
- Full viewport height
- Bottom tab bar fixed at bottom
- Content area scrollable if needed

#### 3. MapView Component

**Location:** `src/views/map_view.rs`

**Purpose:** Placeholder page for Map View tab

**Content:**
- Placeholder text: "Map View"
- Brief description: "Restaurant map will appear here"
- Visual placeholder (could be a simple div with background color or icon)
- Styled to match app theme

#### 4. AccountView Component

**Location:** `src/views/account_view.rs`

**Purpose:** Placeholder page for Account tab

**Content:**
- Placeholder text: "Account"
- Brief description: "Profile and settings will appear here"
- Visual placeholder
- Styled to match app theme

#### 5. SocialFeedView Component

**Location:** `src/views/social_feed_view.rs`

**Purpose:** Placeholder page for Social Feed tab

**Content:**
- Placeholder text: "Social Feed"
- Brief description: "Friends' reviews and recommendations will appear here"
- Visual placeholder
- Styled to match app theme

## State Management

### Tab State

**Type:** `enum MainTab { SocialFeed, MapView, Account }`

**Implementation:**
- Use Dioxus `use_signal()` hook in BottomTabLayout
- Sync with current route using `use_router()` hook
- Update tab state when route changes
- Update route when tab is clicked

**Example Pattern:**
```rust
let router = use_router();
let active_tab = use_signal(|| MainTab::MapView);

// Sync tab with route
use_effect(move || {
    let current_route = router.current();
    // Update active_tab based on current_route
});

// Handle tab click
let handle_tab_change = move |tab: MainTab| {
    active_tab.set(tab);
    // Navigate to corresponding route
};
```

### Route-to-Tab Mapping

- `/` → `MainTab::MapView`
- `/account` → `MainTab::Account`
- `/social` → `MainTab::SocialFeed`

## Styling Requirements

### Bottom Tab Bar Styling

**Position:**
- Fixed at bottom of viewport
- Full width
- Height: ~60-70px (mobile-friendly)

**Visual Design:**
- Background color: Distinct from main content (e.g., white with shadow or dark theme)
- Border: Top border or shadow to separate from content
- Tab buttons: Equal width, centered content
- Active tab: Highlighted background, different text color, or underline
- Inactive tabs: Subtle styling, hover states

**Responsive:**
- Works on mobile viewport sizes
- Touch-friendly tap targets (minimum 44x44px)
- Accessible contrast ratios

### Component Styling

**Placeholder Pages:**
- Centered content
- Consistent typography
- Match app color scheme
- Clear visual hierarchy

**Layout:**
- Full viewport height
- Content area: `calc(100vh - tab_bar_height)`
- Prevent content from being hidden behind tab bar

### CSS File Structure

```
assets/styling/
├── main.css              # Global styles
├── bottom_tab_bar.css    # NEW: Bottom tab bar styles
└── bottom_tab_layout.css # NEW: Layout styles
```

## Testing Requirements

### E2E Test Coverage

**Test File:** `tests/test_navigation_0_1_0.py`

**Test Cases:**

1. **Bottom Tab Bar Renders**
   - Verify bottom tab bar is visible
   - Verify all three tabs are present
   - Verify tab bar is fixed at bottom

2. **Tab Navigation Works**
   - Click Social Feed tab → navigates to `/social`
   - Click Map View tab → navigates to `/`
   - Click Account tab → navigates to `/account`
   - Verify URL changes correctly
   - Verify correct page content is displayed

3. **Active Tab Indicator**
   - Verify active tab has visual indicator
   - Switch tabs and verify indicator updates
   - Verify only one tab is active at a time

4. **Deep Linking**
   - Navigate directly to `/account` → Account tab is active
   - Navigate directly to `/social` → Social Feed tab is active
   - Navigate directly to `/` → Map View tab is active

5. **Placeholder Pages Display**
   - Verify Map View placeholder content is visible
   - Verify Account placeholder content is visible
   - Verify Social Feed placeholder content is visible

### Unit Test Considerations

- Tab state management logic
- Route-to-tab mapping functions
- Component rendering with different tab states

## Acceptance Criteria

### Functional Requirements

- [ ] Bottom tab bar is visible and fixed at bottom of viewport
- [ ] Three tabs are present: Social Feed (left), Map View (center), Account (right)
- [ ] Clicking a tab navigates to the correct route and updates URL
- [ ] Active tab has clear visual indicator
- [ ] All three placeholder pages render with distinct content
- [ ] Deep linking works for all three routes
- [ ] Navigation is smooth (no page reloads, client-side routing)

### Visual Requirements

- [ ] Tab bar has appropriate styling (background, borders, shadows)
- [ ] Active tab is visually distinct from inactive tabs
- [ ] Tab bar is responsive and works on mobile viewport sizes
- [ ] Placeholder pages have consistent styling
- [ ] Content is not hidden behind tab bar

### Technical Requirements

- [ ] Uses Dioxus Router for navigation
- [ ] Tab state is managed with signals
- [ ] Route enum is properly structured with layout
- [ ] Components follow Dioxus 0.7 patterns
- [ ] Code is formatted with rustfmt
- [ ] No linter errors

### Testing Requirements

- [ ] All E2E tests pass
- [ ] Tests validate tab navigation
- [ ] Tests validate active tab indicators
- [ ] Tests validate deep linking

## Migration Notes

### Breaking Changes

- **Removed:** Top navbar component (`Navbar`)
- **Removed:** `Home` and `Blog` route components (replaced with new routes)
- **Changed:** Route structure completely redesigned

### Backward Compatibility

- This is a foundational change, so backward compatibility is not required
- Old routes (`/`, `/blog/:id`) will no longer work
- This is expected as we're establishing the new navigation pattern

### Cleanup Tasks

- Remove `src/views/home.rs` (or repurpose if needed)
- Remove `src/views/blog.rs` (or repurpose if needed)
- Remove `src/views/navbar.rs` (replaced by bottom_tab_layout.rs)
- Update `src/views/mod.rs` exports
- Remove unused CSS files if any

## Dependencies

### No New Dependencies Required

- Uses existing Dioxus Router (already in dependencies)
- Uses existing Dioxus signals (already available)
- No new external crates needed

### Asset Requirements

- Tab bar icons (optional): Can use text labels or simple icons
- CSS files for styling

## Future Considerations

### Extensions for Future Versions

- **0.2.0:** Account page will be fleshed out with profile forms
- **0.3.0:** Map View will integrate actual map component
- **0.4.0+:** Social Feed will show actual social content
- Tab bar structure remains stable across versions

### Potential Enhancements

- Tab badges/notifications (future)

---

**Document Purpose:** This specification provides detailed implementation guidance for Version 0.1.0. It should be used as input for Cursor plan mode to implement the navigation foundation with proper testing and validation.
